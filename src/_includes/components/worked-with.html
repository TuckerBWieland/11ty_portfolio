<!-- Mobile Layout (under 640px) -->
<div class="sm:hidden bg-background-primary py-20" id="mobile-section">
   <div class="px-4">
      <!-- Section title centered -->
      <div class="mb-16 text-center">
         <h2 class="text-white uppercase font-bold leading-none tracking-normal align-middle"
            style="font-family: 'Helvetica Neue', sans-serif; font-weight: 700; font-size: 80px; line-height: 100%; letter-spacing: 0%;">
            <div>WORKED</div>
            <div>WITH</div>
         </h2>
      </div>

      <!-- Logo container - horizontal scrolling -->
      <div class="overflow-hidden relative" id="horizontal-container">
         <div class="flex items-center h-full py-8" id="horizontal-track">
            <!-- Logo 1 - L'Oreal -->
            <div class="w-64 h-48 flex-shrink-0 mx-8 flex items-center justify-center">
               <img src="/static/image1.png" alt="L'Oreal" class="w-full h-full object-contain" />
            </div>
            <!-- Logo 2 - Billion Oyster Project -->
            <div class="w-64 h-48 flex-shrink-0 mx-8 flex items-center justify-center">
               <img src="/static/image2.png" alt="Billion Oyster Project" class="w-full h-full object-contain" />
            </div>
            <!-- Logo 3 - General Assembly -->
            <div class="w-64 h-48 flex-shrink-0 mx-8 flex items-center justify-center">
               <img src="/static/image3.png" alt="General Assembly" class="w-full h-full object-contain" />
            </div>
            <!-- Logo 4 - Justworks -->
            <div class="w-64 h-48 flex-shrink-0 mx-8 flex items-center justify-center">
               <img src="/static/image4.png" alt="Justworks" class="w-full h-full object-contain" />
            </div>
            <!-- Logo 5 - UPS -->
            <div class="w-64 h-48 flex-shrink-0 mx-8 flex items-center justify-center">
               <img src="/static/image5.png" alt="UPS" class="w-full h-full object-contain" />
            </div>
            <!-- Logo 6 - Shopify -->
            <div class="w-64 h-48 flex-shrink-0 mx-8 flex items-center justify-center">
               <img src="/static/image6.png" alt="Shopify" class="w-full h-full object-contain" />
            </div>
         </div>
      </div>
      <!-- "and more :)" text -->
      <div class="text-center mt-8">
         <p class="font-mono text-white text-sm">
            and more :)
         </p>
      </div>
   </div>
</div>

<!-- Remove the spacer div since we don't need it anymore -->
<div id="scroll-spacer" class="sm:hidden" style="height: 0px;"></div>

<!-- Tablet Layout (640px - 1024px) -->
<div class="hidden sm:block lg:hidden bg-background-primary py-20" id="tablet-section">
   <div class="px-5">
      <!-- Section title centered -->
      <div class="mb-16 text-center">
         <h2 class="text-white uppercase font-bold leading-none tracking-normal align-middle"
            style="font-family: 'Helvetica Neue', sans-serif; font-weight: 700; font-size: 120px; line-height: 100%; letter-spacing: 0%;">
            <div>WORKED</div>
            <div>WITH</div>
         </h2>
      </div>

      <!-- Logo container - centered flex layout -->
      <div class="grid grid-cols-3 gap-4 max-w-2xl mx-auto">
         <!-- First row -->
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out tablet-card">
            <img src="/static/image1.png" alt="L'Oreal" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out tablet-card">
            <img src="/static/image2.png" alt="Billion Oyster Project" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out tablet-card">
            <img src="/static/image3.png" alt="General Assembly" class="w-full aspect-square object-cover" />
         </div>

         <!-- Second row -->
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out tablet-card">
            <img src="/static/image4.png" alt="Justworks" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out tablet-card">
            <img src="/static/image5.png" alt="UPS" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out tablet-card">
            <img src="/static/image6.png" alt="Shopify" class="w-full aspect-square object-cover" />
         </div>
      </div>

      <!-- "and more :)" text -->
      <div class="text-center mt-8">
         <p class="font-mono text-white text-sm">
            and more :)
         </p>
      </div>
   </div>
</div>

<!-- Desktop Layout (1024px+) -->
<div class="hidden lg:block bg-background-primary py-32" id="desktop-section">
   <div class="max-w-7xl mx-auto px-11">
      <!-- Section title -->
      <div class="grid grid-cols-5 gap-6 max-w-6xl mx-auto mb-8" id="logo-container">
         <div></div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out desktop-card">
            <h2 class="text-white uppercase font-bold leading-none tracking-normal align-middle"
               style="font-family: 'Helvetica Neue', sans-serif; font-weight: 700; font-size: 120px; line-height: 100%; letter-spacing: 0%;">
               Worked
            </h2>
         </div>
         <!-- Empty columns 4 and 5 for first row -->
         <div></div>
         <div></div>
         <div></div>
      </div>
      <div class="grid grid-cols-5 gap-6 max-w-6xl mx-auto mb-8" id="logo-container">
         <!-- Second row: empty columns 1 and 2, then columns 3, 4, 5 -->
         <div></div>
         <div></div>
         <h2 class="text-white uppercase font-bold leading-none tracking-normal align-middle"
            style="font-family: 'Helvetica Neue', sans-serif; font-weight: 700; font-size: 120px; line-height: 100%; letter-spacing: 0%;">
            With
         </h2>
         <div></div>
         <div></div>
      </div>

      <!-- Logo container - 5 column grid -->
      <div class="grid grid-cols-5 gap-6 max-w-6xl mx-auto" id="logo-container">
         <!-- First row: columns 1, 2, 3 -->
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out desktop-card">
            <img src="/static/image1.png" alt="L'Oreal" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out desktop-card">
            <img src="/static/image2.png" alt="Billion Oyster Project" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out desktop-card">
            <img src="/static/image3.png" alt="General Assembly" class="w-full aspect-square object-cover" />
         </div>
         <!-- Empty columns 4 and 5 for first row -->
         <div></div>
         <div></div>
         <!-- Second row: empty columns 1 and 2, then columns 3, 4, 5 -->
         <div></div>
         <div></div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out desktop-card">
            <img src="/static/image4.png" alt="Justworks" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out desktop-card">
            <img src="/static/image5.png" alt="UPS" class="w-full aspect-square object-cover" />
         </div>
         <div class="opacity-0 translate-y-12 transition-all duration-2000 ease-out desktop-card">
            <img src="/static/image6.png" alt="Shopify" class="w-full aspect-square object-cover" />
         </div>
      </div>

      <!-- "and more :)" text -->
      <div class="text-right mt-12">
         <p class="font-mono text-white text-lg">
            and more :)
         </p>
      </div>
   </div>
</div>

<!-- Load GSAP from CDN -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>

<script>
   // Register GSAP ScrollTrigger
   gsap.registerPlugin(ScrollTrigger);

   // Mobile horizontal scroll animation
   function initMobileScroll() {
      if (window.innerWidth >= 640) return;

      const section = document.getElementById('mobile-section');
      const container = document.getElementById('horizontal-container');
      const track = document.getElementById('horizontal-track');

      if (!section || !container || !track) return;

      // Kill any existing ScrollTriggers for mobile
      ScrollTrigger.getAll().forEach(trigger => {
         if (trigger.trigger === section || trigger.trigger === container) {
            trigger.kill();
         }
      });

      // Set container height dynamically based on content
      gsap.set(container, {
         height: "280px", // Height for logos + padding
         width: "100%",
         overflow: "hidden"
      });

      // Calculate the distance needed to scroll through all logos
      // Add extra padding to ensure first and last logos are fully visible
      const trackWidth = track.scrollWidth;
      const containerWidth = container.offsetWidth;
      const scrollDistance = trackWidth - containerWidth + 128; // Extra 128px for padding

      // Only create animation if there's content to scroll
      if (scrollDistance > 0) {
         // Create horizontal scroll animation
         const horizontalTween = gsap.to(track, {
            x: -scrollDistance,
            ease: "none"
         });

         // Create ScrollTrigger for the horizontal scrolling
         ScrollTrigger.create({
            trigger: container,
            start: "top 80%",
            end: "bottom 20%",
            scrub: 1,
            animation: horizontalTween,
            invalidateOnRefresh: true
         });
      }

      // Set initial position to show first logo properly
      gsap.set(track, {
         x: 64
      }); // Start with 64px offset to center first logo
   }

   // Tablet static layout (no scrolling)
   function initTabletStatic() {
      if (window.innerWidth < 640 || window.innerWidth >= 1024) return;

      // Kill any existing ScrollTriggers for tablet
      ScrollTrigger.getAll().forEach(trigger => {
         if (trigger.trigger && trigger.trigger.id === 'tablet-section') {
            trigger.kill();
         }
      });
   }

   // Desktop & Tablet animation
   function initDesktopTabletAnimation() {
      const sections = ['#desktop-section', '#tablet-section'];

      sections.forEach(sectionId => {
         const section = document.querySelector(sectionId);
         if (!section) return;

         const cards = section.querySelectorAll('[class*="desktop-card"], [class*="tablet-card"]');

         // Kill existing animations on these cards
         cards.forEach(card => {
            ScrollTrigger.getAll().forEach(trigger => {
               if (trigger.trigger === card) {
                  trigger.kill();
               }
            });
         });

         // Create staggered animation for cards
         gsap.fromTo(cards, {
            opacity: 0,
            y: 48
         }, {
            opacity: 1,
            y: 0,
            duration: 0.8,
            stagger: 0.2,
            ease: "power2.out",
            scrollTrigger: {
               trigger: section,
               start: "top 80%",
               end: "bottom 20%",
               toggleActions: "play none none reverse"
            }
         });
      });
   }

   function initAnimations() {
      // Kill all existing ScrollTriggers
      ScrollTrigger.killAll();

      // Initialize animations based on screen size
      initMobileScroll();
      initTabletStatic();
      initDesktopTabletAnimation();

      // Refresh ScrollTrigger
      ScrollTrigger.refresh();
   }

   // Initialize when DOM is ready
   document.addEventListener('DOMContentLoaded', function() {
      initAnimations();
   });

   // Handle resize with proper cleanup
   let resizeTimeout;
   window.addEventListener('resize', function() {
      clearTimeout(resizeTimeout);
      resizeTimeout = setTimeout(function() {
         initAnimations();
      }, 250);
   });

   // Refresh on page load
   window.addEventListener('load', function() {
      ScrollTrigger.refresh();
   });
</script>